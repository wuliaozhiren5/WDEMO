#空白

 

substringFromIndex 和 substringToIndex用法
https://www.jianshu.com/p/9f24c847debd
https://blog.csdn.net/xiaodanq/article/details/41592303

substringFromIndex：从Index开始截取到最后

substringToIndex：从最前头一直截取到Index

substringFromIndex 和 substringToIndex用法，有需要的朋友可以参考下。

```
NSString *testsubstringToorFromIndex = @"test1234";

NSString *fromIndexstring = [testsubstringToorFromIndex substringFromIndex:2];



NSString *toIndexstring = [testsubstringToorFromIndex substringToIndex:2];

NSLog(@"subtringfromindex is %@",fromIndexstring);

NSLog(@"subtringToindex is %@",toIndexstring);
```
```
输出结果

2014-11-29 06:23:59.634 sdktest[587:11024] subtringfromindex is st1234

2014-11-29 06:23:59.634 sdktest[587:11024] subtringToindex is te
```
作者：侃侃_e3c7
链接：https://www.jianshu.com/p/9f24c847debd
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------

  
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////

AlertView  提示框 确认 取消
MWSTradeAlertView
使用
```
    NSMutableAttributedString *titleText = [[NSMutableAttributedString alloc] initWithString:@"发布确认"];
    titleText.lineSpacing = 2.5;
    titleText.font = [UIFont boldSystemFontOfSize:20];
    titleText.color = kCOLOR_FFFFFF;
    
    UIFont *textFont = [UIFont systemFontOfSize:15];
    NSMutableAttributedString *text = [[NSMutableAttributedString alloc] initWithString:@""];
    //设置行间距
    text.lineSpacing = 2.5;
    //text.lineSpacing = 9 - (textFont.lineHeight - textFont.pointSize);
    //设置文本字号
    text.font = textFont;
    //设置字体颜色
    text.color = [UIColor blackColor];
    
    {
        NSMutableAttributedString *one = [[NSMutableAttributedString alloc] initWithString:@"您将已"];
        one.lineSpacing = 2.5;
        one.font = textFont;
        one.color = kCOLOR_FFFFFF;
        [text appendAttributedString:one];
    }
    {
        NSMutableAttributedString *one = [[NSMutableAttributedString alloc] initWithString:priceStr];
        one.lineSpacing = 2.5;
        one.font = [UIFont boldSystemFontOfSize:24];
        one.color = kCOLOR_C13030;
        //描边
        one.strokeWidth = @(-3);
        one.strokeColor =  [UIColor whiteColor];
        [text appendAttributedString:one];
    }
    {
        NSMutableAttributedString *one = [[NSMutableAttributedString alloc] initWithString:@"元的价格发布"];
        one.lineSpacing = 2.5;
        one.font = textFont;
        one.color = kCOLOR_FFFFFF;
        [text appendAttributedString:one];
    }
    {
        NSMutableAttributedString *one = [[NSMutableAttributedString alloc] initWithString:countStr];
        one.lineSpacing = 2.5;
        one.font = [UIFont boldSystemFontOfSize:24];
        one.color = kCOLOR_C13030;
        //描边
        one.strokeWidth = @(-3);
        one.strokeColor =  [UIColor whiteColor];
        [text appendAttributedString:one];
    }
    {
        NSMutableAttributedString *one = [[NSMutableAttributedString alloc] initWithString:@"个赏品"];
        one.lineSpacing = 2.5;
        one.font = textFont;
        one.color = kCOLOR_FFFFFF;
        [text appendAttributedString:one];
    }
    
    @weakify(self);
    MWSTradeAlertView *alertView = [[MWSTradeAlertView alloc] initWithFrame:CGRectMake(0, 0, KWidth, KHeight)
                                                         attributedTitelStr:titleText
                                                       attributedContentStr:text
                                                                 confirmStr:@"确认发布"
                                                                  cancelStr:@"取消"
                                                             confirmHandler:^{
        @strongify(self);
        [self publish];
    }
                                                              cancelHandler:^{
        
    }];
    [alertView show];
```

```
//关闭交易
- (void)clickCloseBtn:(UIButton *)btn {
    @weakify(self);
    MWSTradeAlertView *alertView = [[MWSTradeAlertView alloc] initWithFrame:CGRectMake(0, 0, KWidth, KHeight)
                                                                   titelStr:@"关闭交易"
                                                                 contentStr:@"确认关闭本次交易吗？"
                                                                 confirmStr:@"关闭交易"
                                                                  cancelStr:@"再想想"
                                                             confirmHandler:^{
        @strongify(self);
        [self closeTrade];

        
    }
                                                              cancelHandler:^{
         
    }];
    [alertView show];
}

- (void)closeTrade {
    
}

- (void)refreshTrade {
    
}
```

 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


BottomBar 1个按钮 2个按钮 穿透
MWSPackBottomBar 2个按钮 穿透

```
@property(nonatomic, strong) MWSPackBottomBar *bottomBar;

    [self.view addSubview:self.bottomBar];

    [self.bottomBar mas_makeConstraints:^(MASConstraintMaker *make) {
        make.bottom.equalTo(@(0));
        make.leading.equalTo(@0);
        make.trailing.equalTo(@0);
        make.height.equalTo(@(50 + 30 + 6));
    }];
    
    [self.view bringSubviewToFront:self.bottomBar];
    //更新数字
    [self updateBottomBarCountStr];


- (void)updateBottomBarCountStr {
//    NSString *countStr = [NSString stringWithFormat:@"已打包%zi件物品", self.mArr.count];
//    [self.bottomBar.detailBtn setTitle:countStr forState:UIControlStateNormal];
    NSInteger count = self.mArr.count;
    self.bottomBar.count = count;
}

//lazy
- (MWSPackBottomBar *)bottomBar {
    if (!_bottomBar) {
        _bottomBar = [[MWSPackBottomBar alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];
        [_bottomBar.nextBtn addTarget:self action:@selector(clickNextBtn:) forControlEvents:UIControlEventTouchUpInside];
        [_bottomBar.detailBtn addTarget:self action:@selector(clickDetailBtn:) forControlEvents:UIControlEventTouchUpInside];
    }
    return _bottomBar;
}
```




MWSTradeDetailPayBottomBar 1个按钮 穿透
MWSTradeDetailCloseBottomBar 1个按钮 穿透


```
#import "MWSTradeDetailPayBottomBar.h"
#import "MWSTradeDetailCloseBottomBar.h"


@property (nonatomic, strong) MWSTradeDetailPayBottomBar *payBottomBar;
@property (nonatomic, strong) MWSTradeDetailCloseBottomBar *closeBottomBar;


    [self.view addSubview:self.payBottomBar];
    [self.view addSubview:self.closeBottomBar]; 
    
    [self.view bringSubviewToFront:self.payBottomBar];
    [self.view bringSubviewToFront:self.closeBottomBar];

    [self.payBottomBar mas_makeConstraints:^(MASConstraintMaker *make) {
        make.bottom.equalTo(@(appMargin().bottom - 30));
        make.leading.equalTo(@0);
        make.trailing.equalTo(@0);
        make.height.equalTo(@(50 + 30 + 6));
    }];
    
    [self.closeBottomBar mas_makeConstraints:^(MASConstraintMaker *make) {
        make.bottom.equalTo(@(appMargin().bottom - 30));
        make.leading.equalTo(@0);
        make.trailing.equalTo(@0);
        make.height.equalTo(@(50 + 30 + 6));
    }];
    
    

- (MWSTradeDetailPayBottomBar *)payBottomBar {
    if (!_payBottomBar) {
        _payBottomBar = [[MWSTradeDetailPayBottomBar alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];
        //        [_payBottomBar.nextBtn addTarget:self action:@selector(clickNextBtn:) forControlEvents:UIControlEventTouchUpInside];
        [_payBottomBar.nextBtn addTarget:self action:@selector(clickPayBtn:) forControlEvents:UIControlEventTouchUpInside];
    }
    return _payBottomBar;
}

- (MWSTradeDetailCloseBottomBar *)closeBottomBar {
    if (!_closeBottomBar) {
        _closeBottomBar = [[MWSTradeDetailCloseBottomBar alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];
        //        [_closeBottomBar.nextBtn addTarget:self action:@selector(clickNextBtn:) forControlEvents:UIControlEventTouchUpInside];
        [_closeBottomBar.nextBtn addTarget:self action:@selector(clickCloseBtn:) forControlEvents:UIControlEventTouchUpInside];
    }
    return _closeBottomBar;
}

////刷新
//- (void)clickRefreshBtn:(UIButton *)btn {
//    
//}

//支付
- (void)clickPayBtn:(UIButton *)btn {
    
}

//关闭交易
- (void)clickCloseBtn:(UIButton *)btn {
    
}
```

//////////////////////////////////////////////
//////////////////////////////////////////////
//////////////////////////////////////////////


公司
新马甲
http://wiki.in.rr.tv/pages/viewpage.action?pageId=107216899
```
准备工作
1、全新账户
2、确定发布机器（虚拟机）
3、确定测试手机（实体机）
4、创建开发发布证书（Xcode自动生成）
5、填写APP信息（苹果后台信息填写（包括基本信息、元数据、隐私协议、官网、内购、收款卡（主体需和其他马甲包不一致）、协议、税务、沙盒账户、自动续期订阅服务器回调地址等））
6、Friday 后台信息填写（主要是内购相关）
7、在进行与苹果服务器网络通信时，需要使用流量作为热点
8、含有自动续期产品时，需在描述写清楚产品策略和协议地址，可按前面的马甲修改
9、版权文件信息、App商店截图
其他平台Key申请
1.0 版本可申请
1、友盟carsh和性能监控（自己创建）Account: juquanquan666 / juquanquan2021
2、数美（找群里创建 提供下需要新增的appid（appid自定义） 应用名称）Account：xgy@rrmj.tv / rrtv1230D
3、阿里 EMAS 日志服务（自己创建 https://emas.console.aliyun.com/#/overview 若无账号密码找薛庆亮申请，然后找董留阳处理日志，使得可以在线上查询）
4、倍业 （找赵曜创建）
5、乐播 投屏需要申请组播权限 https://doc.hpplay.com.cn/web/#/p/6347bfedb528ee18acda47543ab3790c 然后申请乐播Key （https://cloud.hpplay.cn:9889/dev/ 账号 renren1  密码 lebo23046885）
1.1 版本可申请
6、穿山甲、广点通（找赵曜创建，需要第一版上线后）
7、QQ 、微信、微博分享（找邢根有要（杨志辉负责具体事务）需要第一版上线后，还有其他项目内部分享配置修改，schme和分享设置回调等）
8、分享需要现在moblink 平台新建universal link，随后等QQ APP ID拿到后，补上QQ的ID，参照其他App（ https://new.dashboard.mob.com/#/summary  bd@rrmj.tv / rrmj1234）
混淆准备工作
1、图片视频的MD5修改
先cd到当前主项目路径
1 脚本绝对地址 2project绝对地址 3 需要混淆的文件夹(当前目录下)
使用示例 
/Users/zyj/Desktop/renren/ob/shell/ob/image_md5_modifier.sh   /Users/zyj/Desktop/renren/JQQ2/AIJDD.xcodeproj    AIJDD
2、新电脑环境配置
Xcode、homebrew（https://zhuanlan.zhihu.com/p/341831809），通过brew安装 gunsed等插件，用以执行tops命令（类名混淆）
如果终端需要翻墙，可以安装 privoxy  https://blog.aberlt.com/2018/06/25/Mac-%E7%BB%88%E7%AB%AF%E9%80%9A%E8%BF%87-privoxy-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/
3、类名方法名修改
template_class_rules.tops 存类名 all.h 存方法名 薛庆亮有一个脚本自动修改，发给他
Swift类名手动修改 除了更改前缀，中间的单词酌情修改，OC中用到的不会自动修改，需要执行全局替换
正式打包前，放开 all.h 注释，更改Bundle ID和账户，执行ob目录下ob.sh ob.sh 需要替换具体项目名和目录名
项目内部工作
1、协议地址、常用H5地址替换，API域名、H5域名更换(陈宇负责，发邮件给他)， 播放域名、图片域名更换（后端负责）
2、Friday后台新建cliettype、平台、内购相关配置
3、需要审核账号、游客购买账号，固定验证码
提审前工作
1、通知运维（龙博）放开海外IP限制 (后期工作，观察苹果IP段，稳定后放开特定IP即可)
2、通知邢根有安排快审（需要APP完整标题、APP Number）
3、切换为正式环境审核版
```



#iOS渐变色图片

#import "UIImage+GradientColor.h"//渐变色


//- (UIImageView *)shadowImgV {
//    if (!_shadowImgV) {
//        _shadowImgV = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, KWidth, 281)];
//        //        _shadowImgV.contentMode = UIViewContentModeScaleAspectFill;
//        //        _shadowImgV.image = [UIImage imageNamed:@"pic_banner_shadow"];
//
//        UIColor *topColor = RGBACOLOR(0, 0, 0, 1);
//        UIColor *topColor1 = RGBACOLOR(0, 0, 0, 0.9);
//        UIColor *bottomColor = RGBACOLOR(0, 0, 0, 0.1);
//        UIImage *bgImg = [UIImage gradientColorImageFromColors:@[topColor, topColor1, bottomColor]  gradientType:GradientTypeTopToBottom imgSize:CGSizeMake(KWidth, 281) opaque:NO];;
//        //         UIColor *bgColor = [UIColor colorWithPatternImage:bgImg];
//        //         [self.bgView  setBackgroundColor:[bgColor colorWithAlphaComponent:0.4]];
//        _shadowImgV.image = bgImg;
//    }
//    return _shadowImgV;
//}



七、iOS-UIPasteBoard剪切板（淘口令）使用
https://www.jianshu.com/p/8e88e1fdfb53

iOS 类似复制链接打开淘宝APP后弹出页面功能 
https://www.jianshu.com/p/4921bc3f3fd2


-------------------------------------------------------

UICollectionView滚动到指定Cell不生效问题
https://www.jianshu.com/p/f6d724ef8941

```
[self.collectionView layoutIfNeeded];
[self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:index inSection:0] atScrollPosition:UICollectionViewScrollPositionCenteredVertically animated:NO];
```
------------------------------------------------------------

UITableView 滚动到指定行cell
https://blog.csdn.net/foolsong/article/details/49842009
```
[self.tableview scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:temp inSection:0] atScrollPosition:UITableViewScrollPositionBottom animated:YES];
```

iOS tableView滚动到相应位置
https://www.jianshu.com/p/323ef015e3dd
1、tableView一行代码滚动到顶部
```
 [self.tableView scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES];
```
tableView一行代码滚动对应cell
``
//获取到需要跳转位置的行数
NSIndexPath *scrollIndexPath = [NSIndexPath indexPathForRow:10 inSection:0];
//滚动到其相应的位置
[[self tableView] scrollToRowAtIndexPath:scrollIndexPath
        atScrollPosition:UITableViewScrollPositionTop animated:YES];
```
枚举类型
```
以下枚举决定滚动到指定位置的哪个位置
typedef NS_ENUM(NSInteger, UITableViewScrollPosition) {
    UITableViewScrollPositionNone,
    UITableViewScrollPositionTop,    
    UITableViewScrollPositionMiddle,   
    UITableViewScrollPositionBottom
};
```
2、scrollView一行代码滚动到顶部
```
  [self.scrollView setContentOffset:CGPointMake(0,0) animated:YES];
```

https://www.jianshu.com/p/8f6b8b2be986
https://www.cnblogs.com/hero11223/p/9237205.html


--------------------------------------------------------------------------------

IOS学习之UITableView滚动到指定位置
https://www.cnblogs.com/oyhj/p/4959731.html
方法一：
```
[self.tableView reloadData];
[self.tableView layoutIfNeeded];
//刷新完成
```

方法二：
```
[self.tableView reloadData];
dispatch_async(dispatch_get_main_queue(), ^{
    //刷新完成
});
```


【iOS UI篇】Label描边+发光字
https://www.jianshu.com/p/4fd1a769559a

github
https://github.com/luckyzhu/myPrepo


本文介绍如何给Label实现酷炫的描边+外发光效果，虽然实现简单，但是网上资料却是很少。

绘制实现描边
继承Lable,重写下面方法
.h文件：

```
#import "MSStrokeLabel.h"

@property (strong,nonatomic) UIColor *strokeColor;
@property (assign,nonatomic) CGFloat strokeWidth;
```

.m文件
```
- (void)drawTextInRect:(CGRect)rect
{
    if (self.strokeWidth > 0) {
        CGSize shadowOffset = self.shadowOffset;
        UIColor *textColor = self.textColor;
    
        CGContextRef c = UIGraphicsGetCurrentContext();
        CGContextSetLineWidth(c, self.strokeWidth);
        CGContextSetLineJoin(c, kCGLineJoinRound);
        //画外边
        CGContextSetTextDrawingMode(c, kCGTextStroke);
        self.textColor = self.strokeColor;
        [super drawTextInRect:rect];
        //画内文字
        CGContextSetTextDrawingMode(c, kCGTextFill);
        self.textColor = textColor;
        self.shadowOffset = CGSizeMake(0, 0);
        [super drawTextInRect:rect];
        self.shadowOffset = shadowOffset;
    } else {
        [super drawTextInRect:rect];
    }
}
```

使用方法
```
MSStrokeLabel *label = [MSStrokeLabel new];
label.frame = CGRectMake(160, 70, 150, 100);
label.text = @"Hello";
label.backgroundColor = [UIColor clearColor];
label.textColor = [UIColor greenColor];
label.font = [UIFont systemFontOfSize:50];
//描边
label.strokeColor = [UIColor orangeColor];
label.strokeWidth = 1;
//发光
label.layer.shadowRadius = 2;
label.layer.shadowColor = [UIColor redColor].CGColor;
label.layer.shadowOffset = CGSizeMake(0, 0);
label.layer.shadowOpacity = 1.0;
[self.view addSubview:label];
```
